{"version":3,"file":"mcp-logger.factory.js","sourceRoot":"","sources":["../../../src/mcp/utils/mcp-logger.factory.ts"],"names":[],"mappings":";;AAqFA,0CAqBC;AA1GD,2CAAkD;AAMlD,MAAM,cAAe,SAAQ,eAAM;IAGjC,YAAY,OAAe,EAAE,aAAyB;QACpD,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,aAAa,GAAG,IAAI,GAAG,CAAC,aAAa,CAAC,CAAC;IAC9C,CAAC;IAED,GAAG,CAAC,OAAY,EAAE,OAAgB;QAChC,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;YAClC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAC9B,CAAC;IACH,CAAC;IAID,KAAK,CAAC,OAAY,EAAE,GAAG,cAAqB;QAC1C,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC;YACpC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,cAAc,CAAC,CAAC;QAC1C,CAAC;IACH,CAAC;IAED,IAAI,CAAC,OAAY,EAAE,OAAgB;QACjC,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;YACnC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;IAED,KAAK,CAAC,OAAY,EAAE,OAAgB;QAClC,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC;YACpC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IAED,OAAO,CAAC,OAAY,EAAE,OAAgB;QACpC,IAAI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC;YACtC,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAClC,CAAC;IACH,CAAC;CACF;AAKD,MAAM,UAAW,SAAQ,eAAM;IAE7B,GAAG,CAAC,OAAY,EAAE,OAAgB;IAElC,CAAC;IAKD,KAAK,CAAC,OAAY,EAAE,GAAG,cAAqB;IAE5C,CAAC;IAGD,IAAI,CAAC,OAAY,EAAE,OAAgB;IAEnC,CAAC;IAGD,KAAK,CAAC,OAAY,EAAE,OAAgB;IAEpC,CAAC;IAGD,OAAO,CAAC,OAAY,EAAE,OAAgB;IAEtC,CAAC;CACF;AAQD,SAAgB,eAAe,CAC7B,OAAe,EACf,OAA+B;IAG/B,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,KAAK,SAAS,EAAE,CAAC;QAC9C,OAAO,IAAI,eAAM,CAAC,OAAO,CAAC,CAAC;IAC7B,CAAC;IAGD,IAAI,OAAO,CAAC,OAAO,KAAK,KAAK,EAAE,CAAC;QAC9B,OAAO,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC;IAGD,IAAI,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;QAClE,OAAO,IAAI,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,KAAmB,CAAC,CAAC;IAC1E,CAAC;IAGD,OAAO,IAAI,eAAM,CAAC,OAAO,CAAC,CAAC;AAC7B,CAAC","sourcesContent":["import { Logger, LogLevel } from '@nestjs/common';\nimport type { McpOptions } from '../interfaces';\n\n/**\n * Logger that filters log messages based on configured log levels\n */\nclass FilteredLogger extends Logger {\n  private enabledLevels: Set<LogLevel>;\n\n  constructor(context: string, enabledLevels: LogLevel[]) {\n    super(context);\n    this.enabledLevels = new Set(enabledLevels);\n  }\n\n  log(message: any, context?: string): void {\n    if (this.enabledLevels.has('log')) {\n      super.log(message, context);\n    }\n  }\n\n  error(message: any, stack?: string, context?: string): void;\n  error(message: any, ...optionalParams: [...any, string?, string?]): void;\n  error(message: any, ...optionalParams: any[]): void {\n    if (this.enabledLevels.has('error')) {\n      super.error(message, ...optionalParams);\n    }\n  }\n\n  warn(message: any, context?: string): void {\n    if (this.enabledLevels.has('warn')) {\n      super.warn(message, context);\n    }\n  }\n\n  debug(message: any, context?: string): void {\n    if (this.enabledLevels.has('debug')) {\n      super.debug(message, context);\n    }\n  }\n\n  verbose(message: any, context?: string): void {\n    if (this.enabledLevels.has('verbose')) {\n      super.verbose(message, context);\n    }\n  }\n}\n\n/**\n * No-op logger that discards all log messages\n */\nclass NoOpLogger extends Logger {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  log(message: any, context?: string): void {\n    // No-op\n  }\n\n  error(message: any, stack?: string, context?: string): void;\n  error(message: any, ...optionalParams: [...any, string?, string?]): void;\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  error(message: any, ...optionalParams: any[]): void {\n    // No-op\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  warn(message: any, context?: string): void {\n    // No-op\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  debug(message: any, context?: string): void {\n    // No-op\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  verbose(message: any, context?: string): void {\n    // No-op\n  }\n}\n\n/**\n * Factory function to create a logger instance based on MCP logging configuration\n * @param context - Logger context (typically the class name)\n * @param options - MCP options containing logging configuration\n * @returns Logger instance (standard, filtered, or no-op based on configuration)\n */\nexport function createMcpLogger(\n  context: string,\n  options: McpOptions | undefined,\n): Logger {\n  // If no options provided or logging not configured, use standard logger\n  if (!options || options.logging === undefined) {\n    return new Logger(context);\n  }\n\n  // If logging is explicitly disabled, return no-op logger\n  if (options.logging === false) {\n    return new NoOpLogger(context);\n  }\n\n  // If specific log levels are configured, return filtered logger\n  if (options.logging.level && Array.isArray(options.logging.level)) {\n    return new FilteredLogger(context, options.logging.level as LogLevel[]);\n  }\n\n  // Fallback to standard logger\n  return new Logger(context);\n}\n"]}