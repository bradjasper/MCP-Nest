{"version":3,"file":"mcp-server.factory.js","sourceRoot":"","sources":["../../../src/mcp/utils/mcp-server.factory.ts"],"names":[],"mappings":";;AAMA,0CAmBC;AAxBD,oEAAoE;AACpE,iEAA8D;AAI9D,SAAgB,eAAe,CAC7B,WAAmB,EACnB,QAA4B,EAC5B,OAAmB,EACnB,MAAc;IAEd,MAAM,YAAY,GAAG,IAAA,2CAAoB,EAAC,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;IAE1E,MAAM,CAAC,KAAK,CAAC,yBAAyB,EAAE,YAAY,CAAC,CAAC;IAEtD,MAAM,SAAS,GAAG,IAAI,kBAAS,CAC7B,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,CAAC,OAAO,EAAE,EAChD;QACE,YAAY;QACZ,YAAY,EAAE,OAAO,CAAC,YAAY,IAAI,EAAE;KACzC,CACF,CAAC;IAEF,OAAO,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;AAC9E,CAAC","sourcesContent":["import { McpOptions } from '../interfaces';\nimport { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';\nimport { buildMcpCapabilities } from './capabilities-builder';\nimport { McpRegistryService } from '../services/mcp-registry.service';\nimport { Logger } from '@nestjs/common';\n\nexport function createMcpServer(\n  mcpModuleId: string,\n  registry: McpRegistryService,\n  options: McpOptions,\n  logger: Logger,\n): McpServer {\n  const capabilities = buildMcpCapabilities(mcpModuleId, registry, options);\n\n  logger.debug('Built MCP capabilities:', capabilities);\n\n  const mcpServer = new McpServer(\n    { name: options.name, version: options.version },\n    {\n      capabilities,\n      instructions: options.instructions || '',\n    },\n  );\n\n  return options.serverMutator ? options.serverMutator(mcpServer) : mcpServer;\n}\n"]}